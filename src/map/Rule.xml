<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cy.ssm.mapper.RuleMapper">
	
	<sql id="ruleAllColumns">id,ruleDbUrl,ruleDbVersion</sql>
	<sql id="ruleColumns">ruleDbUrl,ruleDbVersion</sql>
	
	<resultMap type="Rule" id="userResultMap">
		<id column="id" property="id"/>
		<result column="name" property="name"/>
		<result column="ruleDbUrl" property="ruleDbUrl"/>
		<result column="ruleDbVersion" property="ruleDbVersion"/>
	</resultMap>
	
	<insert id="addRule" parameterType="Rule" useGeneratedKeys="true" keyProperty="id">
		insert t_user (<include refid="userColumns"/>) values (#{ruleDbUrl},#{ruleDbVersion})
	</insert>
	
	<select id="findRule" parameterType="Rule" resultMap="userResultMap">
		select * from t_user
	</select>
	
	<update id="updateRule" parameterType="Rule">
		update t_user set 1=1
		<if test="ruleDbUrl != null">
			, ruleDbUrl = #{ruleDbUrl}
		</if>
		<if test="ruleDbVersion != null">
			and ruleDbVersion = #{ruleDbVersion}
		</if>
		where id = #{id} 
	</update>
</mapper>